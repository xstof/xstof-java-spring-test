

GET http://localhost:8080/api/greeting HTTP/1.1
content-type: application/json

###


GET http://localhost:8080/api/me HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0MzM4MTgsIm5iZiI6MTYwMjQzMzgxOCwiZXhwIjoxNjAyNDM3NzE4LCJhaW8iOiJBVFFBeS84UkFBQUFsUFhrSzVIVWp5Zll4MFVOQXgvRUtsSTRRM0ZRSXoyeWdGZ21HMktBTEtqNXNpQkM1NTNJTGtxaitXTGp1K1FVIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFTRUFoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IkR2MlBnOE40YUVxVVdBYVhTcFFkQUEiLCJ2ZXIiOiIyLjAifQ.d42i8AnFlUeg8K6q51-HHTMy_avhpfvAsJEr2hAN_wrUNoYm4guMFrIq2wIx59fv5BP5shOVDEDpV5KceTyax59JTLBar8hcjg_6T2q1MyRSCS4tSHZHyRXKvvoedOeHD_cARO4xfkJK9gShbE2xCJI2rqeNR30IRJu97E9u0a1GcnAkDMg9cFo7PZ7ltjMaYa-27u5eDQQlldbWsg-GYXcZHzC4sd99F3i6zc0XjuqPRGJ5xHd_SZXZw2sqUHk9Wllfy0geb0tmnTFDq4Va_l0RSFuetMrlPJcsmpob_ZJh42Z_02l-i_ZfI3DAs1f7_WapF-IhqWULI3VfLTiYQg

###

GET http://localhost:8080/api/foo HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0MzM4MTgsIm5iZiI6MTYwMjQzMzgxOCwiZXhwIjoxNjAyNDM3NzE4LCJhaW8iOiJBVFFBeS84UkFBQUFsUFhrSzVIVWp5Zll4MFVOQXgvRUtsSTRRM0ZRSXoyeWdGZ21HMktBTEtqNXNpQkM1NTNJTGtxaitXTGp1K1FVIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFTRUFoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IkR2MlBnOE40YUVxVVdBYVhTcFFkQUEiLCJ2ZXIiOiIyLjAifQ.d42i8AnFlUeg8K6q51-HHTMy_avhpfvAsJEr2hAN_wrUNoYm4guMFrIq2wIx59fv5BP5shOVDEDpV5KceTyax59JTLBar8hcjg_6T2q1MyRSCS4tSHZHyRXKvvoedOeHD_cARO4xfkJK9gShbE2xCJI2rqeNR30IRJu97E9u0a1GcnAkDMg9cFo7PZ7ltjMaYa-27u5eDQQlldbWsg-GYXcZHzC4sd99F3i6zc0XjuqPRGJ5xHd_SZXZw2sqUHk9Wllfy0geb0tmnTFDq4Va_l0RSFuetMrlPJcsmpob_ZJh42Z_02l-i_ZfI3DAs1f7_WapF-IhqWULI3VfLTiYQg
#Authorization: {{$aadV2Token 3fd11e85-d8ce-4c7f-b6a0-816346615777}}

###

POST http://localhost:8080/api/foo HTTP/1.1
content-type: application/json
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6ImtnMkxZczJUMENUaklmajRydDZKSXluZW4zOCJ9.eyJhdWQiOiJhZTBhNWI2ZS01MTkwLTRhNTItYmMzMC02Zjg2NDVhNWYyNjIiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vM2ZkMTFlODUtZDhjZS00YzdmLWI2YTAtODE2MzQ2NjE1Nzc3L3YyLjAiLCJpYXQiOjE2MDI0MzM4MTgsIm5iZiI6MTYwMjQzMzgxOCwiZXhwIjoxNjAyNDM3NzE4LCJhaW8iOiJBVFFBeS84UkFBQUFsUFhrSzVIVWp5Zll4MFVOQXgvRUtsSTRRM0ZRSXoyeWdGZ21HMktBTEtqNXNpQkM1NTNJTGtxaitXTGp1K1FVIiwiYXpwIjoiOWIyMzI3YTUtYTVmOS00Njc0LThhZmMtYWVhOTJiNTE0NTIyIiwiYXpwYWNyIjoiMCIsIm5hbWUiOiJUaW1vIENsYWVzc2VucyIsIm9pZCI6IjExYmM3OTIyLTI3MzctNGRlYy1hOTVjLWE3M2Y2ZWQxOTYyZCIsInByZWZlcnJlZF91c2VybmFtZSI6InRpbW9AeHN0b2YueHl6IiwicmgiOiIwLkFTRUFoUjdSUDg3WWYweTJvSUZqUm1GWGQ2VW5JNXY1cFhSR2l2eXVxU3RSUlNJaEFPTS4iLCJyb2xlcyI6WyJzdGFmZiJdLCJzY3AiOiJyZWFkIHdyaXRlIiwic3ViIjoiR09JNnBHdVluOVFRbkRyMjJQUkdPM2NMdXNNcDN5dnQ0Mmg3Y1lEQ05pWSIsInRpZCI6IjNmZDExZTg1LWQ4Y2UtNGM3Zi1iNmEwLTgxNjM0NjYxNTc3NyIsInV0aSI6IkR2MlBnOE40YUVxVVdBYVhTcFFkQUEiLCJ2ZXIiOiIyLjAifQ.d42i8AnFlUeg8K6q51-HHTMy_avhpfvAsJEr2hAN_wrUNoYm4guMFrIq2wIx59fv5BP5shOVDEDpV5KceTyax59JTLBar8hcjg_6T2q1MyRSCS4tSHZHyRXKvvoedOeHD_cARO4xfkJK9gShbE2xCJI2rqeNR30IRJu97E9u0a1GcnAkDMg9cFo7PZ7ltjMaYa-27u5eDQQlldbWsg-GYXcZHzC4sd99F3i6zc0XjuqPRGJ5xHd_SZXZw2sqUHk9Wllfy0geb0tmnTFDq4Va_l0RSFuetMrlPJcsmpob_ZJh42Z_02l-i_ZfI3DAs1f7_WapF-IhqWULI3VfLTiYQg

# validations:
# - works: validates issuer
# - works: validates 'write' scope when doing: .antMatchers(HttpMethod.GET, "/foo").hasAnyAuthority("SCOPE_write")
# - works: validate token expiration and validate token not before
# - test: validates role
# - test: validates audience

# resources:
# - https://docs.spring.io/spring-security/site/docs/5.4.1/reference/html5/#oauth2resourceserver-jwt-authorization-extraction
